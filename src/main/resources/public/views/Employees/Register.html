<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Empleado</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f3f4f6;
            margin: 0;
            padding: 0;
            color: #333;
        }

        h1 {
            text-align: center;
            margin: 20px 0;
            color: #0d6efd;
            font-size: 32px;
            font-weight: bold;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            max-width: 90%;
            margin: 30px auto;
            padding: 40px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .section {
            padding: 50px;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            background-color: #f9fafb;
        }

        .section h2 {
            color: #0d6efd;
            margin-top: 0;
            font-size: 24px;
        }

        label {
            display: block;
            margin-top: 20px;
            font-weight: bold;
            color: #4b5563;
        }

        input,
        select,
        textarea {
            width: 90%;
            padding: 12px;
            margin-top: 5px;
            margin-bottom: 15px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            background-color: #ffffff;
            transition: border-color 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        input:focus,
        select:focus,
        textarea:focus {
            border-color: #0d6efd;
            outline: none;
            box-shadow: 0 0 8px rgba(13, 110, 253, 0.3);
        }

        button {
            background-color: #0d6efd;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        button:hover {
            background-color: #084298;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .grid-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .navigation button {
            flex: 1;
        }

        @media (max-width: 768px) {
            .container {
                gap: 10px;
            }
        }

        .card {
            background-color: #d1e7dd;
            border-radius: 8px;
            padding: 20px;
            color: #155724;
            border: 1px solid #c3e6cb;
            margin-top: 20px;
            text-align: center;
            position: fixed;
            /* Fija la tarjeta al frente */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            /* Centra la tarjeta */
            z-index: 1000;
            /* Asegura que esté al frente */
            width: 80%;
            /* Ajusta el tamaño */
            max-width: 400px;
            /* Limita el tamaño máximo */
        }

        .card button {
            background-color: #0d6efd;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }

        .card button:hover {
            background-color: #084298;
        }
    </style>
</head>

<body>
    <h1>Registro de Empleados</h1>
    <form id="employeeForm" class="container">

        <!-- Información Personal -->
        <div class="section" id="section-personal">
            <h2>Información Personal</h2>
            <div class="grid-columns">
                <div>
                    <label for="name">Nombre Completo:</label>
                    <input type="text" id="name" name="name" placeholder="Escribe tu nombre completo" required>

                    <label for="dob">Fecha de Nacimiento:</label>
                    <input type="date" id="dob" name="birthdate" max="2025-02-04">

                    <label for="marital_status">Estado Civil:</label>
                    <select id="marital_status" name="maritalStatus">
                        <option value="">Selecciona una opción</option>
                        <option value="single">Soltero(a)</option>
                        <option value="married">Casado(a)</option>
                        <option value="divorced">Divorciado(a)</option>
                        <option value="widowed">Viudo(a)</option>
                    </select>
                </div>
                <div>
                    <label for="address">Dirección:</label>
                    <input type="text" id="address" name="address" placeholder="Escribe tu dirección">

                    <label for="nationality">Nacionalidad:</label>
                    <input type="text" id="nationality" name="nationality" placeholder="Ejemplo: Mexicana">

                    <label for="education_level">Nivel de Estudios:</label>
                    <select id="education_level" name="educationLevel">
                        <option value="">Selecciona una opción</option>
                        <option value="primary">Primaria</option>
                        <option value="secondary">Secundaria</option>
                        <option value="high_school">Preparatoria/Bachillerato</option>
                        <option value="bachelor">Licenciatura</option>
                        <option value="master">Maestría</option>
                        <option value="doctorate">Doctorado</option>
                    </select>
                </div>
            </div>
            <button type="button" onclick="nextSection('section-documents')">Siguiente</button>
        </div>


        <!-- Documentación Oficial -->
        <div class="section" id="section-documents" style="display: none;">
            <h2>Documentación Oficial</h2>
            <label for="birth_certificate">Acta de Nacimiento:</label>
            <input type="file" id="birth_certificate" name="birthCertificate" accept=".pdf,.jpg,.png">

            <label for="rfc">RFC:</label>
            <input type="text" id="rfc" name="rfc" maxlength="13" pattern="[A-ZÑ&]{3,4}[0-9]{6}[A-Z0-9]{3}"
                title="El RFC debe contener entre 10 y 13 caracteres con el formato correcto."
                placeholder="Escribe tu RFC">

            <label for="ine">INE:</label>
            <input type="file" id="ine" name="ine" accept=".pdf,.jpg,.png">

            <label for="curp">CURP:</label>
            <input type="text" id="curp" name="curp" maxlength="18" pattern="[A-Z]{4}[0-9]{6}[HM][A-Z]{5}[0-9A-Z]{2}"
                title="El CURP debe contener 18 caracteres con el formato correcto." placeholder="Escribe tu CURP">

            <label for="nss">Número de Seguro Social:</label>
            <input type="text" id="nss" name="nss" maxlength="11" pattern="\d{11}"
                title="El NSS debe contener exactamente 11 dígitos." placeholder="Escribe tu NSS">

            <div class="navigation">
                <button type="button" onclick="prevSection('section-personal')">Atrás</button>
                <button type="button" onclick="nextSection('section-contact')">Siguiente</button>
            </div>
        </div>

        <!-- Información de Contacto -->
        <div class="section" id="section-contact" style="display: none;">
            <h2>Información de Contacto</h2>
            <label for="phone">Teléfono de Contacto:</label>
            <input type="tel" id="phone" name="phone" placeholder="Ejemplo: 555-123-4567" pattern="\d{3}-\d{3}-\d{4}"
                title="El teléfono debe seguir el formato 555-123-4567.">

            <label for="email">Correo Electrónico:</label>
            <input type="email" id="email" name="email" placeholder="Ejemplo: correo@ejemplo.com">

            <div class="navigation">
                <button type="button" onclick="prevSection('section-documents')">Atrás</button>
                <button type="button" onclick="nextSection('section-salary')">Siguiente</button>
            </div>
        </div>

        <!-- Información Bancaria y Salario -->
        <div class="section" id="section-salary" style="display: none;">
            <h2>Información Bancaria y Salario</h2>
            <label for="bank_account">Número de Cuenta Bancaria:</label>
            <input type="text" id="bank_account" name="bankAccount" maxlength="18" pattern="\d{10,18}"
                title="El número de cuenta bancaria debe contener entre 10 y 18 dígitos."
                placeholder="Ejemplo: 1234567890">

            <label for="bank_name">Nombre del Banco:</label>
            <input type="text" id="bank_name" name="bankName" placeholder="Ejemplo: Bancomer">

            <label for="salary">Salario:</label>
            <input type="number" id="salary" name="salary" placeholder="Ejemplo: 15000" step="0.01" min="0">

            <label for="position">Puesto:</label>
            <input type="text" id="position" name="workstation" placeholder="Ejemplo: Gerente de Ventas">

            <div class="navigation">
                <button type="button" onclick="prevSection('section-contact')">Atrás</button>
                <button type="submit">Registrar Empleado</button>
            </div>
        </div>

    </form>
    <div id="successCard" class="card" style="display: none;">
        <h3>¡Empleado registrado exitosamente!</h3>
        <p>Los datos del empleado han sido guardados correctamente.</p>
        <button onclick="goToTop()">Volver al inicio</button>
    </div>

    <script>
function goToTop() {
    // Ocultar la tarjeta de éxito
    document.getElementById('successCard').style.display = 'none';

    // Mostrar la primera sección del formulario
    document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
    document.getElementById('section-personal').style.display = 'block';

    // Desplazar la página hasta el inicio
    window.scrollTo(0, 0);
}

    
        function nextSection(nextId) {
            document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
            document.getElementById(nextId).style.display = 'block';
        }

        function prevSection(prevId) {
            document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
            document.getElementById(prevId).style.display = 'block';
        }

        function readFile(inputId, callback) {
            const fileInput = document.getElementById(inputId);
            const file = fileInput.files[0];

            if (!file) {
                return callback(null);
            }

            const reader = new FileReader();
            reader.onloadend = function () {
                // Convertir el archivo a una cadena base64
                const base64String = reader.result.split(',')[1]; // Remover la cabecera de base64
                callback(base64String);
            };
            reader.readAsDataURL(file); // Convertir el archivo a base64
        }

        document.getElementById('employeeForm').addEventListener('submit', function (e) {
            e.preventDefault(); // Evitar el envío tradicional del formulario

            const formData = new FormData(this);

            // Leer archivos y convertirlos a base64
            readFile('birth_certificate', function (birthCertificateBase64) {
                readFile('ine', function (ineBase64) {
                    // Crear el objeto con los datos del formulario
                    const employeeData = [{
                        name: formData.get('name'),
                        address: formData.get('address'),
                        birthdate: formData.get('birthdate'),
                        nationality: formData.get('nationality'),
                        maritalStatus: formData.get('maritalStatus'),
                        educationLevel: formData.get('educationLevel'),
                        birthCertificate: birthCertificateBase64, // Acta de nacimiento como base64
                        rfc: formData.get('rfc'),
                        ine: ineBase64, // INE como base64
                        curp: formData.get('curp'),
                        nss: formData.get('nss'),
                        phone: formData.get('phone'),
                        email: formData.get('email'),
                        bankAccount: formData.get('bankAccount'),
                        bankName: formData.get('bankName'),
                        salary: formData.get('salary'),
                        workstation: formData.get('workstation')
                    }];

                    // Enviar los datos al servidor
                    fetch('http://localhost:8080/employee/add', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(employeeData) // Enviar los datos como JSON
                    })
                    
                        .then(response => {
                            if (response.ok) {
                                // Mostrar la tarjeta de éxito
                                document.getElementById('successCard').style.display = 'block';

                                // Limpiar el formulario
                                document.getElementById('employeeForm').reset();
                            
                            } else {
                                console.error('Error al registrar el empleado');
                            }
                        })
                                .catch(error => {
                                    console.error("Error al registrar el empleado:", error);
                                });

                            // Función para volver al inicio
                      
                        });
                });
            });


    </script>
</body>

</html>